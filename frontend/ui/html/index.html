<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SpaceNow! — Clima Espacial en Tiempo Real</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/ai-assistant.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand" style="display: flex; align-items: center;">
        <img id="logo-img" src="https://nasa-3513513514684351384351354351.s3.us-east-1.amazonaws.com/logo+(1).png" alt="SpaceNow logo" style="margin-right: 10px;" />
        <h2 class="brand-title">SpaceNow!</h2>
      </div>
      <span class="nav-subtitle">Monitor de Clima Espacial</span>
      <!-- Page tabs -->
      <div class="page-tabs" role="tablist" aria-label="Páginas">
        <a class="tab-link" href="index.html" role="tab">Inicio</a>
        <a class="tab-link" href="flares.html" role="tab">Fulguraciones</a>
        <a class="tab-link" href="cmes.html" role="tab">CMEs</a>
        <a class="tab-link" href="neos.html" role="tab">NEOs</a>
      </div>
      <div class="nav-actions">
        <button id="btn-refresh" class="btn-icon" aria-label="Refrescar datos">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
        <div class="status-indicator">
          <span class="status-dot"></span>
          <span id="last-updated" class="status-text">Actualizando...</span>
        </div>
      </div>
    </div>
  </nav>


  <!-- Hero Banner APOD -->
  <section class="hero-banner" id="hero-banner">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <div class="hero-badge">
        <span class="pulse-dot"></span>
        Imagen Astronómica del Día
      </div>
      <h1 class="hero-title" id="hero-title">Cargando...</h1>
      <p class="hero-date" id="hero-date"></p>
      <p class="hero-explanation" id="hero-explanation"></p>
      <div class="hero-controls">
        <button id="hero-toggle" class="btn-link" aria-expanded="false" aria-controls="hero-explanation" style="display: none;">Ver más</button>
      </div>
      <div class="hero-credit" id="hero-credit"></div>
    </div>
  </section>

  <!-- AI Assistant Button (Floating) -->
  <button id="ai-assistant-btn" class="ai-assistant-btn" aria-label="Asistente IA sobre Clima Espacial">
    <div class="ai-btn-content">
      <span class="ai-icon">🤖</span>
      <span class="ai-pulse"></span>
    </div>
    <span class="ai-tooltip">¡Pregúntame sobre el clima espacial!</span>
  </button>

  <!-- AI Chat Panel -->
  <div id="ai-chat-panel" class="ai-chat-panel" style="display: none;">
    <div class="ai-chat-header">
      <div class="ai-header-left">
        <div class="ai-avatar">
          <span class="ai-avatar-icon">🤖</span>
          <span class="ai-status-dot"></span>

        </div>
        <div class="ai-header-info">
          <h3 class="ai-name">Asistente Espacial</h3>
          <p class="ai-status">Analizando datos en tiempo real</p>
        </div>
      </div>
      <button id="ai-close-btn" class="ai-close-btn" aria-label="Cerrar chat">✕</button>
    </div>
    
    <!-- AI Alerts Section -->
    <div class="ai-alerts-section" id="ai-alerts-section" style="display: none;">
      <div class="ai-alert-header">
        <span class="alert-icon">⚠️</span>
        <span class="alert-title">Alertas Activas</span>
        <button id="ai-toggle-alerts-close" class="ai-toggle-alerts-btn-close" aria-label="Ocultar alertas">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
        </button>
      </div>
      <div id="ai-alerts-container" class="ai-alerts-container">
        <div class="ai-alert-loading">
          <div class="loading-spinner"></div>
          <p>Analizando eventos espaciales...</p>
        </div>
      </div>
    </div>
    
    <!-- Toggle Alerts Button (Collapsed) -->
    <button id="ai-toggle-alerts" class="ai-toggle-alerts-btn" aria-label="Ver alertas activas" style="display: block;">
      <span class="alert-icon">⚠️</span>
      <span class="alert-count" id="alert-count-badge">0</span>
      <span class="alert-text">Ver alertas</span>
    </button>
    
    <!-- Chat Messages -->
    <div id="ai-chat-messages" class="ai-chat-messages">
      <div class="ai-message ai-message-bot">
        <div class="ai-message-avatar">🤖</div>
        <div class="ai-message-bubble">
          <p>¡Hola! 👋 Soy tu asistente de clima espacial. Puedo explicarte qué está pasando en el espacio ahora mismo.</p>
          <p><strong>Pregúntame cosas como:</strong></p>
          <ul>
            <li>"¿Qué es una fulguración solar?"</li>
            <li>"¿Hay algún peligro ahora?"</li>
            <li>"¿Cómo afecta a la Tierra?"</li>
            <li>"Explícame los eventos de hoy"</li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="ai-quick-actions" id="ai-quick-actions">
      <button class="ai-quick-btn" data-question="¿Qué eventos importantes hay ahora?">
        📊 Eventos actuales
      </button>
      <button class="ai-quick-btn" data-question="¿Qué es el clima espacial?">
        📚 ¿Qué es esto?
      </button>
      <button class="ai-quick-btn" data-question="¿Hay peligro para la Tierra?">
        🌍 ¿Hay peligro?
      </button>
    </div>
    
    <!-- Chat Input -->
    <div class="ai-chat-input-container">
      <textarea 
        id="ai-chat-input" 
        class="ai-chat-input" 
        placeholder="Escribe tu pregunta aquí..."
        rows="1"
        maxlength="500"
      ></textarea>
      <button id="ai-send-btn" class="ai-send-btn" aria-label="Enviar mensaje">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
        </svg>
      </button>
    </div>
  </div>

  
  <section class="stats-dashboard" id="stats-dashboard">
    <div class="container">
      <div class="stats-grid">
        <a class="stat-card-link" href="flares.html" aria-label="Ver fulguraciones">
          <div class="stat-card">
            <div class="stat-icon solar">☀️</div>
            <div class="stat-content">
              <div class="stat-label">Actividad Solar</div>
              <div class="stat-value" id="stat-solar">--</div>
              <div class="stat-trend" id="stat-solar-trend"></div>
            </div>
          </div>
        </a>
        <a class="stat-card-link" href="gst.html" aria-label="Ver tormentas geomagnéticas">
          <div class="stat-card">
            <div class="stat-icon geomagnetic">🌍</div>
            <div class="stat-content">
              <div class="stat-label">Índice Geomagnético</div>
              <div class="stat-value" id="stat-geo">--</div>
              <div class="stat-trend" id="stat-geo-trend"></div>
            </div>
          </div>
        </a>
        <a class="stat-card-link" href="neos.html" aria-label="Ver objetos cercanos">
          <div class="stat-card">
            <div class="stat-icon neo">🪐</div>
            <div class="stat-content">
              <div class="stat-label">Objetos Cercanos</div>
              <div class="stat-value" id="stat-neo">--</div>
              <div class="stat-trend" id="stat-neo-trend"></div>
            </div>
          </div>
        </a>
        <a class="stat-card-link" href="cmes.html" aria-label="Ver CMEs">
          <div class="stat-card">
            <div class="stat-icon events">⚡</div>
            <div class="stat-content">
              <div class="stat-label">Eventos Totales</div>
              <div class="stat-value" id="stat-events">--</div>
              <div class="stat-trend" id="stat-events-trend"></div>
            </div>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!-- Current Event Highlight -->
  <section class="current-event" id="current-event" data-event-type="">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-icon">🔴</span>
          Evento Destacado
        </h2>
        <p class="section-subtitle">Evento más relevante en este momento</p>
      </div>
      <div class="event-highlight" id="event-highlight">
        <div class="event-main">
          <div class="event-header-row">
            <div class="event-badge-group" id="current-badges"></div>
            <div class="severity-indicator" id="severity-indicator">
              <span class="severity-dot"></span>
              <span class="severity-text">Evaluando...</span>
            </div>
          </div>
          <h3 class="event-title" id="current-title">Cargando...</h3>
          <p class="event-time" id="current-time"></p>
          
          <!-- Contador en tiempo real -->
          <div class="event-timer" id="event-timer" style="display: none;">
            <span class="timer-icon">⏱️</span>
            <span class="timer-text" id="timer-text"></span>
          </div>
          
          <!-- Barra de progreso temporal -->
          <div class="event-progress" id="event-progress" style="display: none;">
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-labels">
              <span id="progress-start"></span>
              <span id="progress-end"></span>
            </div>
          </div>
          
          <div class="event-details" id="current-details"></div>
          
          <!-- Botón de detalles expandidos -->
          <button class="btn-details" id="btn-details" style="display: none;">
            Ver detalles completos →
          </button>
        </div>
        <div class="event-media" id="current-media">
          <!-- Placeholder por defecto -->
          <div class="media-placeholder">
            <div class="placeholder-icon">🌌</div>
            <div class="placeholder-text">Sin imagen disponible</div>
          </div>
        </div>
      </div>
      
      <!-- Comparación histórica -->
      <div class="event-comparison" id="event-comparison" style="display: none;">
        <div class="comparison-content">
          <span class="comparison-icon">📊</span>
          <span class="comparison-text" id="comparison-text"></span>
        </div>
      </div>
    </div>
  </section>

    <!-- Clima Espacial - Challenge -->
    <section class="challenge-section" id="challenge-section">
    <div class="container">
      <div class="challenge-card">
        <div class="challenge-header">
          <h2>🌞 El Clima Espacial</h2>
          <p class="text-muted">Un viaje interactivo desde el Sol hasta la Tierra</p>
        </div>
        <div class="challenge-body">
          <p><strong>¿Sabías que el Sol puede afectar tu vida diaria?</strong> Aunque está a 93 millones de millas de distancia, las tormentas solares pueden interrumpir GPS, satélites, redes eléctricas y comunicaciones en todo el mundo.</p>
          
          <p>El <em>clima espacial</em> es el conjunto de condiciones que varían constantemente entre el Sol y la Tierra. Cuando el Sol lanza llamaradas solares o eyecciones de masa coronal (CME), estas nubes de partículas cargadas viajan por el espacio y pueden crear auroras hermosas... ¡pero también causar problemas tecnológicos!</p>
          
          <p><strong>🎯 Nuestro Desafío NASA:</strong> Crear una historia digital interactiva que explique el clima espacial de forma divertida y educativa. Descubre cómo afecta a agricultores que usan GPS, pilotos en vuelo, astronautas en órbita, operadores de redes eléctricas y a ti mismo. ¿Listo para la aventura?</p>
        </div>
        <div class="challenge-actions">
          <a href="desafio.html" class="challenge-btn btn-unified primary">🚀 Comenzar la Historia Interactiva →</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal de Detalles Expandidos -->
  <div class="modal-overlay" id="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Detalles del Evento</h2>
        <button class="modal-close" id="modal-close" aria-label="Cerrar">✕</button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- Contenido dinámico -->
      </div>
      <!-- footer intentionally removed: share buttons disabled -->
      <div class="modal-footer" aria-hidden="true" style="display: none;"></div>
    </div>
  </div>

  <!-- Removed timeline: timeline moved to dedicated pages (Fulguraciones/CMEs/Tormentas/NEOs) -->
  <section class="timeline-redirect">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-icon">�</span>
          Eventos por categoría
        </h2>
        <p class="section-subtitle">La línea de tiempo ha sido separada en páginas individuales. Use las tarjetas de arriba para ver mapas interactivos y detalles.</p>
      </div>
      <div class="redirect-grid">
        <a class="card-link" href="flares.html">→ Fulguraciones: mapa interactivo</a>
        <a class="card-link" href="cmes.html">→ Eyecciones de Masa Coronal (CME)</a>
        <a class="card-link" href="gst.html">→ Tormentas Geomagnéticas</a>
        <a class="card-link" href="neos.html">→ Objetos Cercanos (NEOs)</a>
      </div>
    </div>
  </section>

  <!-- Educational Panel -->
  <section class="education-section">
    <div class="container">
      <div class="education-card">
        <div class="education-icon">📚</div>
        <div class="education-content">
          <h3>¿Qué es el Clima Espacial?</h3>
          <p>El clima espacial se refiere a las condiciones en el espacio que pueden afectar a la Tierra y la tecnología humana. Incluye eventos solares como fulguraciones, eyecciones de masa coronal (CME), tormentas geomagnéticas y el paso cercano de asteroides.</p>
          <details class="education-details">
            <summary>Aprende más sobre los eventos</summary>
            <div class="education-grid">
              <div class="education-item">
                <strong>☀️ Fulguraciones Solares (FLR)</strong>
                <p>Explosiones repentinas de energía en la superficie del Sol que liberan radiación electromagnética.</p>
              </div>
              <div class="education-item">
                <strong>💫 Eyecciones de Masa Coronal (CME)</strong>
                <p>Enormes burbujas de plasma magnetizado expulsadas desde el Sol hacia el espacio.</p>
              </div>
              <div class="education-item">
                <strong>🌍 Tormentas Geomagnéticas (GST)</strong>
                <p>Perturbaciones en el campo magnético terrestre causadas por viento solar y CMEs.</p>
              </div>
              <div class="education-item">
                <strong>🪐 Objetos Cercanos a la Tierra (NEO)</strong>
                <p>Asteroides y cometas cuyas órbitas los acercan a nuestro planeta.</p>
              </div>
            </div>
          </details>
        </div>
      </div>
    </div>
  </section>



  <!-- Footer -->
  <footer class="app-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <h3>SpaceNow!</h3>
          <p>Monitor de Clima Espacial en Tiempo Real</p>
        </div>
        <div class="footer-links">
          <h4>Fuentes de Datos</h4>
          <ul>
            <li><a href="https://api.nasa.gov/" target="_blank">NASA Open APIs</a></li>
            <li><a href="https://ccmc.gsfc.nasa.gov/donki/" target="_blank">DONKI - Space Weather Database</a></li>
            <li><a href="https://cneos.jpl.nasa.gov/" target="_blank">CNEOS - Near Earth Objects</a></li>
            <li><a href="https://apod.nasa.gov/" target="_blank">APOD - Astronomy Picture of the Day</a></li>
          </ul>
        </div>
        <div class="footer-disclaimer">
          <h4>⚠️ Aviso Importante</h4>
          <p>Este panel es solo informativo y educativo. No constituye un pronóstico oficial de clima espacial. Para información oficial, consulta <a href="https://www.swpc.noaa.gov/" target="_blank">NOAA Space Weather Prediction Center</a>.</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 SpaceNow! - Datos proporcionados por NASA</p>
      </div>
    </div>
  </footer>

  <script type="module" src="../js/main.js"></script>
</body>
</html>
